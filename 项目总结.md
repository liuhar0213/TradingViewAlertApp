# TradingView Alert App - é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®èƒŒæ™¯

**åˆ›å»ºæ—¥æœŸ**: 2025-11-12
**é¡¹ç›®ç›®æ ‡**: è§£å†³TradingViewé‚®ä»¶è­¦æŠ¥å»¶è¿Ÿé—®é¢˜(å¹³å‡43ç§’),å®ç°é›¶å»¶è¿Ÿè­¦æŠ¥æé†’

**åŸæœ‰æ–¹æ¡ˆé—®é¢˜**:
- Email WatcheræœåŠ¡å™¨æ–¹æ¡ˆ: éœ€è¦æœåŠ¡å™¨,ä¾èµ–ç½‘ç»œ,å¹³å‡å»¶è¿Ÿ43ç§’
- TradingView Webhookæ–¹æ¡ˆ: éœ€è¦å†…ç½‘ç©¿é€,cloudflare tunnelä¸ç¨³å®š

**æœ€ç»ˆè§£å†³æ–¹æ¡ˆ**:
åŸç”ŸAndroidåº”ç”¨ + NotificationListenerService = é›¶å»¶è¿Ÿ + å®Œå…¨ç¦»çº¿

## ğŸ¯ é¡¹ç›®æˆæœ

### å·²å®ŒæˆåŠŸèƒ½

âœ… **åŸç”ŸAndroidåº”ç”¨**
- åŒ…å: `com.tradingview.alertapp`
- ç‰ˆæœ¬: 1.0
- æœ€ä½Androidç‰ˆæœ¬: 5.0 (API 21)
- ç›®æ ‡Androidç‰ˆæœ¬: 13 (API 33)

âœ… **æ ¸å¿ƒåŠŸèƒ½**
1. **NotificationListenerService** - ç³»ç»Ÿçº§é€šçŸ¥ç›‘å¬
2. **è‡ªåŠ¨è¿‡æ»¤** - è¯†åˆ«TradingViewç›¸å…³é€šçŸ¥
3. **è­¦æŠ¥è§¦å‘** - å¤§éŸ³é‡alarm + æŒç»­éœ‡åŠ¨30ç§’
4. **ç®€æ´UI** - ä¸€é”®å¼€å¯é€šçŸ¥è®¿é—®æƒé™

âœ… **GitHubé›†æˆ**
- ä»“åº“: https://github.com/liuhar0213/TradingViewAlertApp
- GitHub Actionsè‡ªåŠ¨æ„å»ºAPK
- å®Œæ•´çš„ä¸­è‹±æ–‡æ–‡æ¡£

## ğŸ“ é¡¹ç›®ç»“æ„

```
C:\Users\27654\Desktop\äº¤æ˜“\project\TradingViewAlertApp\
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ build.yml                          # GitHub Actionsé…ç½®(å·²ä¿®å¤v4)
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â”œâ”€â”€ java/com/tradingview/alertapp/
â”‚   â”‚   â”‚   â”œâ”€â”€ MainActivity.java              # ä¸»ç•Œé¢
â”‚   â”‚   â”‚   â””â”€â”€ NotificationListener.java     # é€šçŸ¥ç›‘å¬æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ res/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ activity_main.xml         # UIå¸ƒå±€
â”‚   â”‚   â”‚   â””â”€â”€ values/
â”‚   â”‚   â”‚       â””â”€â”€ strings.xml
â”‚   â”‚   â””â”€â”€ AndroidManifest.xml               # æƒé™é…ç½®
â”‚   â”œâ”€â”€ build.gradle                           # Appæ„å»ºé…ç½®
â”‚   â””â”€â”€ proguard-rules.pro
â”œâ”€â”€ build.gradle                               # é¡¹ç›®çº§Gradleé…ç½®
â”œâ”€â”€ settings.gradle                            # Gradleè®¾ç½®
â”œâ”€â”€ gradle.properties                          # Gradleå±æ€§
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md                                  # è‹±æ–‡é¡¹ç›®è¯´æ˜
â””â”€â”€ å¿«é€Ÿå¼€å§‹.md                                 # ä¸­æ–‡ä½¿ç”¨æŒ‡å—
```

## ğŸ’» æ ¸å¿ƒä»£ç 

### 1. NotificationListener.java
**ä½ç½®**: `app/src/main/java/com/tradingview/alertapp/NotificationListener.java`

**åŠŸèƒ½**:
- ç»§æ‰¿`NotificationListenerService`
- ç›‘å¬æ‰€æœ‰ç³»ç»Ÿé€šçŸ¥
- è¿‡æ»¤TradingViewç›¸å…³é€šçŸ¥:
  - TradingView app (åŒ…ååŒ…å«`tradingview`)
  - é‚®ä»¶appä¸­åŒ…å«"TradingView"/"Alert"/"è­¦æŠ¥"çš„é€šçŸ¥
- è§¦å‘è­¦æŠ¥:
  - æ’­æ”¾ç³»ç»ŸalarméŸ³æ•ˆ(å¾ªç¯30ç§’)
  - æŒç»­éœ‡åŠ¨(30ç§’)
  - æ˜¾ç¤ºé«˜ä¼˜å…ˆçº§é€šçŸ¥

**å…³é”®æ–¹æ³•**:
```java
@Override
public void onNotificationPosted(StatusBarNotification sbn) {
    // æ£€æµ‹é€šçŸ¥æ¥æºå’Œå†…å®¹
    if (isTradingViewAlert(packageName, title, text)) {
        triggerAlert(title, text);
    }
}

private boolean isTradingViewAlert(String packageName, String title, String text) {
    // TradingView app
    if (packageName.contains("tradingview")) return true;

    // Email apps with TradingView content
    String[] emailApps = {"com.google.android.gm", "com.microsoft.office.outlook", ...};
    // æ£€æŸ¥å†…å®¹æ˜¯å¦åŒ…å«å…³é”®è¯
}
```

### 2. MainActivity.java
**ä½ç½®**: `app/src/main/java/com/tradingview/alertapp/MainActivity.java`

**åŠŸèƒ½**:
- æ£€æŸ¥é€šçŸ¥è®¿é—®æƒé™çŠ¶æ€
- å¼•å¯¼ç”¨æˆ·å¼€å¯æƒé™
- æä¾›æµ‹è¯•æŒ‰é’®

**UIçŠ¶æ€**:
- âœ“ ç»¿è‰² - æƒé™å·²å¼€å¯
- âœ— çº¢è‰² - æƒé™æœªå¼€å¯

### 3. AndroidManifest.xml
**å…³é”®æƒé™**:
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
<uses-permission android:name="android.permission.USE_FULL_SCREEN_INTENT" />
<uses-permission android:name="android.permission.FOREGROUND_SERVICE" />
```

**æœåŠ¡å£°æ˜**:
```xml
<service
    android:name=".NotificationListener"
    android:permission="android.permission.BIND_NOTIFICATION_LISTENER_SERVICE"
    android:exported="true">
    <intent-filter>
        <action android:name="android.service.notification.NotificationListenerService" />
    </intent-filter>
</service>
```

## ğŸ”§ GitHub Actionsé…ç½®

**æ–‡ä»¶**: `.github/workflows/build.yml`

**è§¦å‘æ¡ä»¶**:
- Pushåˆ°main/masteråˆ†æ”¯
- Pull request
- æ‰‹åŠ¨è§¦å‘(workflow_dispatch)

**æ„å»ºæ­¥éª¤**:
1. Checkoutä»£ç 
2. è®¾ç½®JDK 17
3. èµ‹äºˆgradlewæ‰§è¡Œæƒé™
4. ä½¿ç”¨Gradleæ„å»ºrelease APK
5. ç­¾åAPK (éœ€è¦é…ç½®secrets)
6. ä¸Šä¼ APK artifact (å·²ä¿®å¤ä¸ºv4)

**å·²ä¿®å¤é—®é¢˜**:
- ~~ä½¿ç”¨è¿‡æ—¶çš„`actions/upload-artifact@v3`~~ âœ… å·²æ›´æ–°åˆ°v4

**å½“å‰çŠ¶æ€**:
- âš ï¸ æ„å»ºä¼šå› ç¼ºå°‘ç­¾åå¯†é’¥å¤±è´¥(è¿™æ˜¯æ­£å¸¸çš„)
- å¯é€‰: é…ç½®ç­¾åå¯†é’¥ä»¥ç”Ÿæˆå‘å¸ƒç‰ˆAPK

## ğŸ“Š æ€§èƒ½å¯¹æ¯”

| ç‰¹æ€§ | åŸç”ŸAPP | Email Watcher | TradingView Webhook |
|------|---------|--------------|-------------------|
| å»¶è¿Ÿ | **0ç§’** | 43ç§’ | ç†è®º0ç§’ |
| éœ€è¦æœåŠ¡å™¨ | âŒ | âœ… | âœ… |
| éœ€è¦ç½‘ç»œ | âŒ | âœ… | âœ… |
| è€—ç”µé‡ | æä½ | ä¸­ç­‰ | ä½ |
| å¯é æ€§ | **æé«˜** | ä¸­ç­‰ | ä½(tunnelä¸ç¨³å®š) |
| éƒ¨ç½²éš¾åº¦ | **ç®€å•** | ä¸­ç­‰ | å¤æ‚ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®‰è£…APK

**æ–¹å¼1: GitHub Actionsæ„å»º** (æ¨è)
1. è®¿é—®: https://github.com/liuhar0213/TradingViewAlertApp/actions
2. ç­‰å¾…æ„å»ºå®Œæˆ(ä¼šå¤±è´¥,ä½†APKå·²ç”Ÿæˆ)
3. ä¸‹è½½artifactä¸­çš„APK

**æ–¹å¼2: æœ¬åœ°æ„å»º**
```bash
cd "C:\Users\27654\Desktop\äº¤æ˜“\project\TradingViewAlertApp"
.\gradlew assembleRelease
# APKä½ç½®: app/build/outputs/apk/release/app-release.apk
```

### é…ç½®åº”ç”¨

1. **å®‰è£…APK** - å…è®¸ä»æœªçŸ¥æ¥æºå®‰è£…
2. **æ‰“å¼€åº”ç”¨** - ç‚¹å‡»"Enable Notification Access"
3. **æˆæƒ** - åœ¨ç³»ç»Ÿè®¾ç½®ä¸­å¼€å¯"TV Alert Monitor"
4. **æµ‹è¯•** - ç‚¹å‡»"Test Alert"éªŒè¯åŠŸèƒ½

### ç›‘å¬çš„é€šçŸ¥æ¥æº

**TradingView App**:
- æ‰€æœ‰åŒ…ååŒ…å«`tradingview`çš„åº”ç”¨

**é‚®ä»¶App** (å†…å®¹åŒ…å«å…³é”®è¯):
- Gmail: `com.google.android.gm`
- Outlook: `com.microsoft.office.outlook`
- Yahoo Mail: `com.yahoo.mobile.client`
- Samsung Email: `com.samsung.android.email`

**å…³é”®è¯**:
- "TradingView"
- "Alert"
- "è­¦æŠ¥"

## ğŸ” é…ç½®APKç­¾å(å¯é€‰)

å¦‚æœéœ€è¦å‘å¸ƒç‰ˆAPK,é…ç½®GitHub Secrets:

### 1. ç”ŸæˆKeystore
```bash
keytool -genkey -v -keystore my-release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias my-key-alias
```

### 2. è½¬æ¢ä¸ºBase64
```bash
certutil -encode my-release-key.jks my-release-key.txt
```

### 3. æ·»åŠ GitHub Secrets
åœ¨ä»“åº“Settings > Secrets and variables > Actionsä¸­æ·»åŠ :
- `SIGNING_KEY`: keystoreçš„base64å†…å®¹
- `ALIAS`: `my-key-alias`
- `KEY_STORE_PASSWORD`: keystoreå¯†ç 
- `KEY_PASSWORD`: keyå¯†ç 

## ğŸ“ Gitæäº¤å†å²

### Commit 1: åˆå§‹æäº¤
```
commit d9ee3fe
Initial commit: Native Android TradingView Alert Monitor

Features:
- Zero-latency notification monitoring using NotificationListenerService
- Monitors TradingView app and email notifications
- Automatic alert filtering for TradingView/Alert keywords
- Loud alarm sound + continuous vibration (30s)
- Simple UI for enabling notification access
- No server required - completely offline
- GitHub Actions workflow for automated APK builds
```

### Commit 2: ä¿®å¤workflow
```
commit b9c4388
Fix: Update actions/upload-artifact from v3 to v4
```

## ğŸ› å·²çŸ¥é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: GitHub Actionsæ„å»ºå¤±è´¥
**åŸå› **: ç¼ºå°‘APKç­¾åå¯†é’¥
**è§£å†³**:
- æ–¹æ¡ˆA: å¿½ç•¥,ä½¿ç”¨æœ¬åœ°æ„å»ºæˆ–Android Studioæµ‹è¯•
- æ–¹æ¡ˆB: é…ç½®ç­¾åå¯†é’¥(è§ä¸Šæ–‡)

### é—®é¢˜2: é€šçŸ¥è®¿é—®æƒé™æ— æ³•å¼€å¯
**è§£å†³**:
- åœ¨ç³»ç»Ÿè®¾ç½® > ç‰¹æ®Šæƒé™ > é€šçŸ¥è®¿é—®ä¸­æ‰‹åŠ¨æŸ¥æ‰¾
- éƒ¨åˆ†æ‰‹æœºéœ€è¦åœ¨"ç‰¹æ®Šåº”ç”¨æƒé™"ä¸­è®¾ç½®

### é—®é¢˜3: è­¦æŠ¥å£°éŸ³å¤ªå°
**è§£å†³**:
- æé«˜æ‰‹æœº"é—¹é’ŸéŸ³é‡"(ä¸æ˜¯é“ƒå£°éŸ³é‡)
- å…³é—­å‹¿æ‰°æ¨¡å¼

## ğŸ“š ç›¸å…³æ–‡ä»¶

### é¡¹ç›®æ–‡æ¡£
- `README.md` - è‹±æ–‡é¡¹ç›®è¯´æ˜
- `å¿«é€Ÿå¼€å§‹.md` - ä¸­æ–‡ä½¿ç”¨æŒ‡å—
- `é¡¹ç›®æ€»ç»“.md` - æœ¬æ–‡æ¡£

### Email WatcheræœåŠ¡å™¨(æ—§æ–¹æ¡ˆ)
- ä½ç½®: `C:\Users\27654\Desktop\äº¤æ˜“\project\email_alert_app\`
- ç‰ˆæœ¬: 3.7
- çŠ¶æ€: å¯ç»§ç»­ä½¿ç”¨,ä½†å»¶è¿Ÿè¾ƒé«˜

### SSEæœåŠ¡å™¨
- æ–‡ä»¶: `C:\Users\27654\sse_server_with_push.py`
- ç«¯å£: 80 (ä¸ºTradingView webhooké…ç½®)
- çŠ¶æ€: å¯é€‰,åŸç”ŸAPPä¸éœ€è¦

## ğŸ“ æŠ€æœ¯è¦ç‚¹

### Android NotificationListenerService
- ç³»ç»Ÿçº§æœåŠ¡,å¯ç›‘å¬æ‰€æœ‰appé€šçŸ¥
- éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æˆæƒ
- ä½åŠŸè€—,é€‚åˆé•¿æœŸåå°è¿è¡Œ

### é€šçŸ¥è¿‡æ»¤é€»è¾‘
```java
// 1. ç›´æ¥åŒ¹é…TradingView app
if (packageName.contains("tradingview")) return true;

// 2. é‚®ä»¶app + å†…å®¹å…³é”®è¯
if (isEmailApp(packageName) && containsKeywords(content)) return true;
```

### è­¦æŠ¥å®ç°
- ä½¿ç”¨ç³»ç»ŸALARMéŸ³æ•ˆ(æœ€é«˜ä¼˜å…ˆçº§)
- AudioAttributes.USAGE_ALARMç¡®ä¿ä¸è¢«é™éŸ³
- VibrationEffectæŒç»­éœ‡åŠ¨
- è‡ªåŠ¨30ç§’ååœæ­¢

## ğŸ”— é‡è¦é“¾æ¥

- **GitHubä»“åº“**: https://github.com/liuhar0213/TradingViewAlertApp
- **GitHub Actions**: https://github.com/liuhar0213/TradingViewAlertApp/actions
- **æœ¬åœ°é¡¹ç›®**: `C:\Users\27654\Desktop\äº¤æ˜“\project\TradingViewAlertApp\`

## âœ… é¡¹ç›®çŠ¶æ€

**æ•´ä½“çŠ¶æ€**: âœ… å·²å®Œæˆ,å¯ç›´æ¥ä½¿ç”¨

**å·²å®Œæˆ**:
- âœ… åŸç”ŸAndroidé¡¹ç›®åˆ›å»º
- âœ… NotificationListenerServiceå®ç°
- âœ… MainActivityå’ŒUI
- âœ… AndroidManifesté…ç½®
- âœ… Gradleæ„å»ºé…ç½®
- âœ… GitHubä»“åº“åˆ›å»º
- âœ… GitHub Actionsé…ç½®
- âœ… Workflow v4ä¿®å¤
- âœ… å®Œæ•´æ–‡æ¡£(ä¸­è‹±æ–‡)

**å¯é€‰**:
- âšª APKç­¾åé…ç½®(ç”¨äºå‘å¸ƒ)
- âšª æœ¬åœ°Android Studioæµ‹è¯•

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•åº”ç”¨**
   - ç”¨Android Studioæ‰“å¼€é¡¹ç›®
   - è¿æ¥çœŸå®Androidè®¾å¤‡(æ¨¡æ‹Ÿå™¨å¯èƒ½æ— æ³•æµ‹è¯•é€šçŸ¥)
   - å®‰è£…å¹¶æˆäºˆé€šçŸ¥è®¿é—®æƒé™
   - å‘é€æµ‹è¯•TradingViewé‚®ä»¶éªŒè¯

2. **ç”Ÿäº§ä½¿ç”¨**
   - é…ç½®ç­¾åå¯†é’¥
   - ä»GitHub Actionsä¸‹è½½ç­¾åAPK
   - å®‰è£…åˆ°äº¤æ˜“æ‰‹æœº

3. **åç»­ä¼˜åŒ–** (å¯é€‰)
   - æ·»åŠ é€šçŸ¥å†å²è®°å½•
   - å¯é…ç½®çš„è­¦æŠ¥æ—¶é•¿
   - è‡ªå®šä¹‰è­¦æŠ¥éŸ³æ•ˆ
   - æ›´ä¸°å¯Œçš„é€šçŸ¥è¿‡æ»¤è§„åˆ™

---

**é¡¹ç›®åˆ›å»ºè€…**: Claude Code
**æœ€åæ›´æ–°**: 2025-11-12
**ç‰ˆæœ¬**: 1.0
