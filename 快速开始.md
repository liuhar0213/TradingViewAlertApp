# TradingView Alert App - 快速开始指南

## 📁 项目位置
```
C:\Users\27654\Desktop\交易\project\TradingViewAlertApp\
```

## 🎯 项目简介

原生Android应用,通过监听系统通知实现**零延迟**的TradingView警报提醒。

### 核心优势
- ✅ **零延迟**: 不依赖邮件服务器,直接监听通知
- ✅ **离线工作**: 无需网络连接
- ✅ **无需服务器**: 完全在手机本地运行
- ✅ **超低耗电**: 使用系统级通知监听服务

## 🚀 使用方法

### 方案1: 下载已构建的APK

1. 推送代码到GitHub后,访问仓库的 Actions 页面
2. 等待构建完成
3. 下载生成的APK文件
4. 安装到手机

### 方案2: 本地构建

#### 使用Android Studio:
```bash
# 1. 打开Android Studio
# 2. File > Open > 选择项目目录
# 3. 等待Gradle同步完成
# 4. Build > Build Bundle(s) / APK(s) > Build APK(s)
```

#### 使用命令行:
```bash
cd "C:\Users\27654\Desktop\交易\project\TradingViewAlertApp"

# Windows
gradlew.bat assembleRelease

# 生成的APK位置:
# app/build/outputs/apk/release/app-release.apk
```

## 📱 安装和配置

### 1. 安装APK
- 将APK传输到手机
- 在手机上打开文件管理器
- 点击APK安装
- 允许"未知来源"安装

### 2. 授予通知访问权限
1. 打开 "TV Alert Monitor" 应用
2. 点击 "Enable Notification Access"
3. 找到 "TV Alert Monitor" 并开启
4. 返回应用,确认状态显示为绿色 ✓

### 3. 测试功能
- 点击 "Test Alert" 按钮
- 应该听到警报声并感受到震动
- 如果正常,说明配置成功

## 🔔 监听的通知来源

应用会自动监听以下来源的通知:

### 1. TradingView App
- 包名包含 `tradingview` 的应用

### 2. 邮件应用
内容包含 "TradingView", "Alert", 或 "警报" 的邮件通知:
- Gmail (`com.google.android.gm`)
- Outlook (`com.microsoft.office.outlook`)
- Yahoo Mail (`com.yahoo.mobile.client`)
- Samsung Email (`com.samsung.android.email`)

## ⚡ 触发警报时的行为

当检测到TradingView相关通知时:
1. 🔊 播放系统Alarm音效(最高音量,循环30秒)
2. 📳 持续震动(30秒)
3. 📱 显示高优先级提醒通知

自动停止时间: 30秒后自动停止

## 🛠️ 推送到GitHub

```bash
# 1. 在GitHub创建新仓库: TradingView-Alert-App

# 2. 添加远程仓库
cd "C:\Users\27654\Desktop\交易\project\TradingViewAlertApp"
git remote add origin https://github.com/<你的用户名>/TradingView-Alert-App.git

# 3. 推送代码
git push -u origin main
```

## 🔐 配置APK自动签名(可选)

如果需要GitHub Actions自动生成签名的APK:

### 1. 生成Keystore
```bash
keytool -genkey -v -keystore my-release-key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias my-key-alias
```

### 2. 转换为Base64
```bash
# Windows
certutil -encode my-release-key.jks my-release-key.txt
# 打开 my-release-key.txt,复制内容(去掉开头和结尾的标记行)
```

### 3. 在GitHub仓库中添加Secrets
Settings > Secrets and variables > Actions > New repository secret

添加以下4个secrets:
- `SIGNING_KEY`: keystore的base64内容
- `ALIAS`: `my-key-alias`
- `KEY_STORE_PASSWORD`: 创建keystore时设置的密码
- `KEY_PASSWORD`: 创建keystore时设置的密码

## 📂 项目结构

```
TradingViewAlertApp/
├── app/
│   ├── src/main/
│   │   ├── java/com/tradingview/alertapp/
│   │   │   ├── MainActivity.java           # 主界面
│   │   │   └── NotificationListener.java  # 通知监听服务
│   │   ├── res/
│   │   │   └── layout/activity_main.xml   # UI布局
│   │   └── AndroidManifest.xml            # 权限配置
│   └── build.gradle                       # App构建配置
├── .github/workflows/build.yml            # 自动构建配置
└── README.md                              # 项目说明
```

## 🐛 常见问题

### 问题1: 通知访问权限无法开启
- 确保应用已正确安装
- 在系统设置中手动查找通知访问权限
- 部分手机可能需要在"特殊权限"中设置

### 问题2: 警报声音太小
- 应用使用系统Alarm音效
- 在手机设置中提高"闹钟音量"
- 确保手机未开启勿扰模式

### 问题3: 收不到警报
- 检查通知访问权限是否已开启(应用内显示绿色✓)
- 发送测试TradingView邮件验证
- 检查手机是否开启了省电模式限制后台应用

### 问题4: GitHub Actions构建失败
- 首次构建会因缺少签名密钥失败(正常现象)
- 如需签名APK,请按上述步骤配置Secrets
- 或者直接下载未签名的APK用于测试

## 📊 对比Email Watcher方案

| 特性 | 原生APP | Email Watcher |
|------|---------|--------------|
| 警报延迟 | 0秒 | 平均43秒 |
| 服务器 | 不需要 | 需要Python服务器 |
| 网络 | 不需要 | 需要持续连接 |
| 耗电 | 极低 | 中等 |
| 可靠性 | 极高 | 取决于网络稳定性 |
| 部署难度 | 简单(只需安装APK) | 较复杂(需配置服务器) |

## 📞 支持

如有问题,请在GitHub仓库提交Issue。

---

**项目状态**: ✅ 已完成,可直接使用

**最后更新**: 2025-11-12
